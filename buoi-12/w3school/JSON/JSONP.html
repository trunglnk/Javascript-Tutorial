<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JSONP</title>
</head>
<body>
<!--JSONP là một phương thức để gửi dữ liệu JSON mà không phải lo lắng về các vấn đề liên miền.-->

<!--JSONP không sử dụng đối tượng XMLHttpRequest.-->

<!--JSONP sử dụng thẻ <script> để thay thế.-->


<!--
JSONP Intro
Yêu cầu tệp từ miền khác có thể gây ra sự cố do chính sách tên miền chéo.

Yêu cầu tập lệnh bên ngoài từ miền khác không gặp sự cố này.

JSONP sử dụng lợi thế này và yêu cầu tệp bằng cách sử dụng thẻ tập lệnh thay vì đối tượng XMLHttpRequest.

<script src="demo_jsonp.php">
-->

<!--
The Server File
Tệp trên máy chủ bao bọc kết quả bên trong một lệnh gọi hàm:

<?php

$myJSON = '{"name":"John", "age":30, "city":"New York"}';

echo "myFunc(".$myJSON.");";

?>
-->

<!--
The JavaScript function
Hàm có tên "myFunc" nằm trên máy khách và sẵn sàng xử lý dữ liệu JSON:

<script>
function myFunc(myObj) {
  document.getElementById("demo").innerHTML = myObj.name;
}
</script>

<script src="demo_jsonp.php"></script>
-->

<!--
Creating a Dynamic Script Tag (Tạo thẻ tập lệnh động)

Ví dụ trên sẽ thực thi chức năng "myFunc" khi trang đang tải, dựa trên vị trí bạn đặt thẻ script, điều này không hài lòng lắm.

Chỉ nên tạo thẻ script khi cần:

function clickButton() {
  let s = document.createElement("script");
  s.src = "demo_jsonp.php";
  document.body.appendChild(s);
}

function myFunc(myObj) {
  document.getElementById("demo").innerHTML = myObj.name;
}
-->


<!--
Callback Function

Khi bạn không kiểm soát được tệp máy chủ, làm cách nào để tệp máy chủ gọi đúng chức năng?

Đôi khi, tệp máy chủ cung cấp chức năng gọi lại dưới dạng tham số:

let s = document.createElement("script");
s.src = "demo_jsonp2.php?callback=myDisplayFunction";
document.body.appendChild(s);

function myDisplayFunction(myObj) {
  document.getElementById("demo").innerHTML = myObj.name;
}
-->
</body>
</html>